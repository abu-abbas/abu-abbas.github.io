<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wibowo Sulistiyo - CV</title>

  <!-- Vue 3 Global Build -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- html2pdf.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <!-- Font Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <style>
    [v-cloak]{ display:none; }

    * { box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      font-feature-settings: "cv02", "cv05", "cv08", "cv11";
      margin: 0;
      padding: 0;
    }

    .name-heading { letter-spacing: -0.06em; line-height: 0.85; }
    .text-content { font-size: 13.5px; line-height: 1.4; }
    .text-bullet { font-size: 11.5px; line-height: 1.55; }
    .text-sidebar { font-size: 11px; line-height: 1.45; }

    /* --- PDF EXPORT FIX ---
      Root masalah kamu: width 820px > lebar A4 (≈ 794px di 96dpi)
      plus padding Tailwind + padding export bikin offset/crop.

      Solusi:
      - Kunci lebar A4: 794px
      - Matikan padding Tailwind pada container saat clone
      - Pindahkan padding ke inner root khusus PDF
    */

    .pdf-export-container {
      width: 794px !important;
      min-width: 794px !important;
      max-width: 794px !important;
      background: #fff !important;
      color: #1e1f20 !important;
      margin: 0 auto !important;
    }

    /* Matikan padding Tailwind yang nempel di #cv-capture-area */
    .pdf-export-container.no-tailwind-padding {
      padding-left: 0 !important;
      padding-right: 0 !important;
      padding-top: 0 !important;
      padding-bottom: 0 !important;
    }

    /* Padding yang benar dipasang di inner */
    .pdf-export-inner {
      padding: 40px 48px !important; /* sedikit lebih rapat */
    }

    /* Kompres spacing khusus untuk PDF supaya muat 1 halaman */
    .pdf-export-inner .space-y-12 > :not([hidden]) ~ :not([hidden]) {
      margin-top: 2rem !important; /* dari 3rem */
    }

    .pdf-export-inner .space-y-8 > :not([hidden]) ~ :not([hidden]) {
      margin-top: 1.5rem !important;
    }

    .pdf-export-inner .space-y-6 > :not([hidden]) ~ :not([hidden]) {
      margin-top: 1rem !important;
    }

    .pdf-export-inner .space-y-3 > :not([hidden]) ~ :not([hidden]) {
      margin-top: 0.5rem !important;
    }

    .pdf-export-inner .space-y-2 > :not([hidden]) ~ :not([hidden]) {
      margin-top: 0.35rem !important;
    }

    /* Kompres line-height sedikit saat PDF */
    .pdf-export-inner .text-bullet {
      line-height: 1.45 !important;
    }

    .pdf-export-inner .text-sidebar {
      line-height: 1.35 !important;
    }

    /* --- PDF PRINT CONTRAST BOOST (biar gak pudar saat dicetak) --- */
    .pdf-export-inner, .pdf-export-inner * {
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
    }

    /* Naikkan kontras body text (Tailwind slate + opacity sering jadi terlalu pucat di printer) */
    .pdf-export-inner p,
    .pdf-export-inner li,
    .pdf-export-inner span,
    .pdf-export-inner a {
      opacity: 1 !important;
      color: #2b2b2b !important;
    }

    /* Judul/heading tetap lebih tegas */
    .pdf-export-inner h1,
    .pdf-export-inner h2,
    .pdf-export-inner h3 {
      opacity: 1 !important;
      color: #1e1f20 !important;
    }

    /* Teks meta (periode) tetap lebih soft tapi terbaca */
    .pdf-export-inner .text-\[10\.5px\] {
      opacity: 1 !important;
      color: #555 !important;
    }

    /* Bullet dot tetap hitam */
    .pdf-export-inner .bg-\[\#1e1f20\] {
      background-color: #1e1f20 !important;
    }

    /* Pastikan grid stabil saat html2canvas render */
    .pdf-export-inner .grid {
      display: grid !important;
      grid-template-columns: repeat(12, minmax(0, 1fr)) !important;
      width: 100% !important;
      gap: 3rem !important;
    }

    /* Kadang Tailwind drop di clone, jadi paksa span */
    .pdf-export-inner .md\\:col-span-8 { grid-column: span 8 / span 8 !important; }
    .pdf-export-inner .md\\:col-span-4 { grid-column: span 4 / span 4 !important; }

    @media print {
      @page { margin: 0; size: A4; }
      .no-print { display: none !important; }
    }
  </style>
</head>

<body class="bg-white">
  <div id="app" v-cloak>
    <div
      id="app-content"
      :class="isDark ? 'bg-[#131314] text-slate-400' : 'bg-white text-slate-600'"
      class="min-h-screen relative selection:bg-zinc-200"
    >
      <!-- Panel Kontrol -->
      <div class="fixed top-8 right-8 no-print z-50 flex flex-col gap-3">
        <!-- Toggle Tema -->
        <button
          @click="toggleDarkMode"
          title="Ganti Tema"
          class="flex h-10 w-10 items-center justify-center rounded-full border shadow-lg transition-all active:scale-90"
          :class="isDark ? 'bg-zinc-800 border-zinc-700 text-zinc-300 hover:bg-zinc-700' : 'bg-white border-zinc-200 text-zinc-800 hover:bg-zinc-50'"
        >
          <svg v-if="isDark" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707m12.728 0l-.707-.707M6.343 6.364l-.707.707M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
          <svg v-else xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
          </svg>
        </button>

        <!-- Cetak -->
        <button
          @click="printCV"
          title="Cetak Manual"
          class="flex h-10 w-10 items-center justify-center rounded-full border shadow-lg transition-all active:scale-90"
          :class="isDark ? 'bg-zinc-800 border-zinc-700 text-zinc-300 hover:bg-zinc-700' : 'bg-white border-zinc-200 text-zinc-800 hover:bg-zinc-50'"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
          </svg>
        </button>

        <!-- Download PDF -->
        <button
          @click="downloadPDF"
          title="Unduh PDF Langsung"
          class="flex h-10 w-10 items-center justify-center rounded-full border shadow-lg transition-all active:scale-90"
          :class="isDark ? 'bg-zinc-800 border-zinc-700 text-zinc-300 hover:bg-zinc-700' : 'bg-white border-zinc-200 text-zinc-800 hover:bg-zinc-50'"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
          </svg>
        </button>
      </div>

      <!-- Area CV (yang dicapture) -->
      <div id="cv-capture-area" class="max-w-5xl mx-auto px-6 py-10 md:px-12 lg:px-20">
        <!-- INNER ROOT: ini yang nanti diberi padding khusus PDF saat clone -->
        <div id="pdf-root">
          <div class="grid grid-cols-1 md:grid-cols-12 gap-10 lg:gap-14">
            <!-- Main Content -->
            <div class="md:col-span-8">
              <header class="mb-10">
                <h1 class="text-[58px] font-bold name-heading mb-4 transition-colors" :class="isDark ? 'text-white' : 'text-[#1e1f20]'">
                  {{ name }}
                </h1>
                <p class="text-[14.5px] leading-relaxed font-medium transition-colors opacity-85" :class="isDark ? 'text-slate-400' : 'text-slate-600'">
                  {{ tagline }}
                </p>
              </header>

              <section>
                <h2 class="text-[13.5px] font-bold mb-6 transition-colors tracking-tight" :class="isDark ? 'text-white' : 'text-[#1e1f20]'">
                  Relevant Experience
                </h2>

                <div class="space-y-8">
                  <div v-for="(exp, index) in experiences" :key="index">
                    <div class="space-y-0.5 mb-2.5">
                      <div v-for="(role, rIndex) in exp.roles" :key="rIndex" class="flex items-baseline flex-wrap gap-x-2">
                        <h3 class="text-content">
                          <span class="font-normal" :class="isDark ? 'text-slate-300' : 'text-slate-600'">{{ role.title }}</span>
                          <template v-if="rIndex === 0">
                            <span class="text-slate-300 mx-1 font-normal opacity-40">·</span>
                            <span class="font-bold whitespace-nowrap" :class="isDark ? 'text-white' : 'text-[#1e1f20]'">{{ exp.company }}</span>
                          </template>
                        </h3>
                        <span class="text-[10.5px] font-medium whitespace-nowrap opacity-50" :class="isDark ? 'text-slate-500' : 'text-slate-400'">
                          {{ role.period }}
                        </span>
                      </div>
                    </div>

                    <ul class="space-y-2">
                      <li v-for="(bullet, bIndex) in exp.bullets" :key="bIndex" class="flex items-start text-bullet" :class="isDark ? 'text-slate-400' : 'text-slate-500'">
                        <span class="mr-3 mt-[0.55rem] shrink-0 w-[4.5px] h-[4.5px] rounded-full" :class="isDark ? 'bg-slate-400' : 'bg-[#1e1f20]'" ></span>
                        <span>{{ bullet }}</span>
                      </li>
                    </ul>
                  </div>
                </div>
              </section>
            </div>

            <!-- Sidebar -->
            <div class="md:col-span-4 space-y-12 mt-1">
              <div class="text-sidebar space-y-0.5 font-medium tracking-tight text-left mb-8 transition-colors" :class="isDark ? 'text-slate-500' : 'text-slate-400'">
                <p class="hover:text-blue-500 transition-colors cursor-pointer">{{ contact.email }}</p>
                <p>{{ contact.phone }}</p>
                <p class="hover:text-blue-500 transition-colors cursor-pointer">{{ contact.github }}</p>
                <p class="hover:text-blue-500 transition-colors cursor-pointer">{{ contact.website }}</p>
              </div>

              <section>
                <h2 class="text-[12px] font-bold mb-4 tracking-tight transition-colors" :class="isDark ? 'text-white' : 'text-[#1e1f20]'">Skills</h2>
                <div class="space-y-6">
                  <div v-for="item in skillGroups" :key="item.title" class="text-sidebar">
                    <h3 class="font-bold mb-1" :class="isDark ? 'text-slate-200' : 'text-[#1e1f20]'">{{ item.title }}</h3>
                    <p class="font-medium leading-relaxed opacity-85" :class="isDark ? 'text-slate-400' : 'text-slate-500'">{{ item.content }}</p>
                  </div>
                </div>
              </section>

              <section>
                <h2 class="text-[12px] font-bold mb-4 tracking-tight transition-colors" :class="isDark ? 'text-white' : 'text-[#1e1f20]'">Selected Projects</h2>
                <div class="space-y-6">
                  <div v-for="project in selectedProjects" :key="project.title" class="text-sidebar">
                    <h3 class="font-bold mb-1" :class="isDark ? 'text-slate-200' : 'text-[#1e1f20]'">{{ project.title }}</h3>
                    <p class="font-medium leading-relaxed opacity-85" :class="isDark ? 'text-slate-400' : 'text-slate-500'">{{ project.description }}</p>
                  </div>
                </div>
              </section>

              <section>
                <h2 class="text-[12px] font-bold mb-4 tracking-tight transition-colors" :class="isDark ? 'text-white' : 'text-[#1e1f20]'">Education</h2>
                <div class="space-y-3 text-sidebar">
                  <h3 class="font-bold" :class="isDark ? 'text-slate-200' : 'text-[#1e1f20]'">Universitas Budi Luhur Jakarta</h3>
                  <div class="opacity-85 font-medium">
                    <p>Bachelor of Computer Science</p>
                    <p class="text-[9px] uppercase tracking-widest font-bold mt-0.5">Information Technology</p>
                  </div>
                </div>
              </section>

              <section id="interests-section">
                <h2 class="text-[12px] font-bold mb-4 tracking-tight transition-colors" :class="isDark ? 'text-white' : 'text-[#1e1f20]'">Interests</h2>
                <p class="text-sidebar font-medium leading-relaxed opacity-85" :class="isDark ? 'text-slate-400' : 'text-slate-500'">
                  Backend architecture, distributed systems, distributed queues, CLI tools, shell scripting, and clean architecture.
                </p>
              </section>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const { createApp } = Vue;
    createApp({
      data() {
        return {
          isDark: false,
          name: 'Wibowo Sulistiyo',
          tagline: 'Backend Specialist & CLI Enthusiast focused on high-performance systems, distributed architecture, and terminal-based automation.',
          contact: {
            email: 'wibowo.sulistiyo@gmail.com',
            phone: '(+62) 812 3456 7890',
            github: 'github.com/abu-abbas',
            website: 'abu-abbas.github.io'
          },
          experiences: [
            {
              company: 'Pemprov DKI Jakarta',
              roles: [
                { title: 'Senior Software Engineer', period: 'Jan 2024 — Sekarang' },
                { title: 'Software Engineer', period: 'Jun 2021 — Des 2023' }
              ],
              bullets: [
                'Merancang dan mengoptimalkan layanan backend konkurensi tinggi, menangani jutaan permintaan dengan latensi minimal.',
                'Mengembangkan alat CLI internal khusus untuk otomasi alur kerja penerapan dan pemantauan sistem, mengurangi tugas manual sebesar 60%.',
                'Implementasi sistem antrean terdistribusi untuk pemrosesan latar belakang, memastikan konsistensi data andal di seluruh microservices.',
                'Melakukan tuning aplikasi mendalam dan optimalisasi database untuk meningkatkan throughput sistem dan mempercepat waktu respons.'
              ]
            },
            {
              company: 'Apple',
              roles: [{ title: 'UI Engineer Co-op', period: 'Juli — Des 2017' }],
              bullets: [
                'Mengembangkan aplikasi web interaktif untuk Apple Music menggunakan Ember dan SCSS.',
                'Membangun Ekstensi Apple Music untuk Facebook Messenger memanfaatkan integrasi API internal Apple.',
                'Merancang antarmuka pengguna widget pemutar web Apple Music untuk otorisasi pengguna dalam browser.'
              ]
            }
          ],
          skillGroups: [
            { title: 'Languages & Scripting', content: 'Go, PHP, TypeScript, JavaScript (ES6+), Shell Scripting (Bash/Zsh), Oracle, MySQL, PostgreSQL' },
            { title: 'Backend & Architecture', content: 'Clean Architecture, Microservices, Distributed Queues (Redis/RabbitMQ), Performance Tuning' },
            { title: 'Infrastructure & CLI', content: 'Linux/Unix, Docker, Git, Vim, Custom CLI Tooling, CI/CD Pipelines' }
          ],
          selectedProjects: [
            { title: 'Custom CLI Automation Kit', description: 'Alat terminal berbasis Go untuk otomatisasi scaffolding microservices dan konfigurasi lingkungan kerja.' },
            { title: 'High-Throughput Queue Manager', description: 'Layanan khusus untuk menangani pemrosesan pekerjaan asinkron masif dengan logika retry tingkat lanjut.' }
          ]
        }
      },
      methods: {
        toggleDarkMode() {
          this.isDark = !this.isDark;
          localStorage.setItem('cv-theme-wibowo', this.isDark ? 'dark' : 'light');
        },
        printCV() {
          window.print();
        },
        async downloadPDF() {
          await document.fonts.ready;

          const wasDark = this.isDark;
          this.isDark = false;

          const element = document.getElementById('cv-capture-area');

          const opt = {
            margin: [0, 0, 0, 0],
            filename: 'CV_Wibowo_Sulistiyo.pdf',
            image: { type: 'jpeg', quality: 1 },
            html2canvas: {
              scale: 2,
              useCORS: true,
              backgroundColor: '#ffffff',
              scrollX: 0,
              scrollY: 0,
              windowWidth: element.scrollWidth,
              onclone: (clonedDoc) => {
                const capture = clonedDoc.getElementById('cv-capture-area');
                const pdfRoot = clonedDoc.getElementById('pdf-root');

                // Kunci lebar A4 & hilangkan padding Tailwind di wrapper
                capture.classList.add('pdf-export-container', 'no-tailwind-padding');

                // Padding & stabilizer grid untuk PDF
                pdfRoot.classList.add('pdf-export-inner');
              }
            },
            jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
          };

          try {
            await new Promise(r => setTimeout(r, 250));
            await html2pdf().set(opt).from(element).save();
          } finally {
            this.isDark = wasDark;
          }
        },
        syncTheme() {
          const savedTheme = localStorage.getItem('cv-theme-wibowo');
          if (savedTheme) {
            this.isDark = savedTheme === 'dark';
          } else {
            this.isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          }
        }
      },
      mounted() {
        this.syncTheme();
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
          if (!localStorage.getItem('cv-theme-wibowo')) {
            this.isDark = e.matches;
          }
        });
      }
    }).mount('#app');
  </script>
</body>
</html>
